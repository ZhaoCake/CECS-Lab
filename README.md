# 做 2023 CECS-Lab 始于25/8/3记录

## 8/3

首先是把这个实验的flake环境做出来。观察目录，每个实验的脚本其实都是把可能存在的旧文件删除，然后软链接过来上一层的一些文件夹。

稍微感觉有点不规范。rv32g简称为rv32m也是比较迷惑行为的，固然可以考虑这是为了简化知识，着力核心，但是这部分背景的介绍即使不在正文里出现也可以通过引用格式的形式写在讲义里吧。

既然这个test.c里面没有用到浮点，那么完全可以用rv32im的arch啊，何必用rv32g让人迷惑。我试过了，用rv32im和用rv32g的区别只有第三行
```
	.attribute arch, "rv32i2p1_m2p0"  # 这个是-march=rv32im。g的会长很多，因为g应该是imafd_zicsr_zifencei。
```
既然如此就完全没有把rv32g称为RV32M的必要，略感失望，想说明支持乘除法完全有更好的方式，却非要把浮点、fence、csr一起混在里面。

但感谢讲义的编写者，既然主要目的并不是riscv，主次之分当然是很重要的，对一些汇编的背景介绍让我有所收获。

1.2应该有一个错，既然文字描述是把汇编编译成目标，那么命令应该是
```bash
$ riscv64-unknown-linux-gnu-gcc -c -march=rv32g -mabi=ilp32 -o test.o test.s
```
才对。

## 8/4


